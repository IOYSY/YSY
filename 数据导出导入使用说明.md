# 📦 数据导出导入功能使用说明

## ✨ 功能介绍

为了解决 IndexedDB 数据只存储在本地浏览器的问题，我们添加了**数据导出/导入功能**。现在您可以：

1. 在本地编辑好所有内容
2. 导出数据为 JSON 文件
3. 将数据部署到服务器
4. 所有访问者都能看到相同的内容！

---

## 🚀 完整使用流程

### 第一步：在本地编辑内容

1. 在本地打开 `admin.html`（管理后台）
2. 添加/编辑：
   - 网站信息
   - 作品内容
   - 个人信息
3. 保存所有更改

### 第二步：导出数据

1. 在管理后台顶部，点击 **"导出数据"** 按钮（绿色按钮）
2. 浏览器会自动下载 `portfolio-data-xxxxx.json` 文件
3. 这个文件包含了您所有的数据

### 第三步：替换默认数据文件

1. 将下载的 JSON 文件**重命名**为：`default-data.json`
2. 用它**替换**项目根目录下的 `default-data.json` 文件
3. 这样新访问者首次打开网站时会自动加载您的数据

### 第四步：部署到服务器

```bash
# 1. 进入项目目录
cd D:\YSY_zhuye

# 2. 添加修改
git add .

# 3. 提交
git commit -m "更新作品数据"

# 4. 推送到 GitHub
git push
```

### 第五步：等待自动部署

- Vercel 会自动检测更新
- 大约 30 秒后部署完成
- 清除浏览器缓存或使用隐私模式测试

---

## 🔄 更新内容的流程

当您想更新网站内容时：

1. 在本地 `admin.html` 修改内容
2. 点击 **"导出数据"**
3. 替换 `default-data.json`
4. 推送到 GitHub：
   ```bash
   git add default-data.json
   git commit -m "更新作品内容"
   git push
   ```
5. Vercel 自动部署

---

## 💾 导入数据（可选）

如果您想在另一台电脑上继续编辑，或者恢复之前的数据：

1. 在管理后台点击 **"导入数据"** 按钮（橙色按钮）
2. 选择之前导出的 JSON 文件
3. 确认导入（会覆盖当前所有数据）
4. 页面自动刷新，显示导入的内容

---

## 📂 文件说明

### `default-data.json`
- **作用**：存储默认数据，首次访问时自动加载
- **位置**：项目根目录
- **格式**：JSON
- **何时更新**：每次您想更改网站内容时

### 导出的数据文件结构
```json
{
  "version": "1.0",
  "exportDate": "2024-01-01T00:00:00.000Z",
  "data": {
    "siteInfo": { ... },      // 网站信息
    "works": [ ... ],         // 作品列表
    "personalInfo": { ... }   // 个人信息
  }
}
```

---

## ⚙️ 工作原理

### 本地开发：
- 数据存储在浏览器的 IndexedDB
- 每次打开都会读取本地数据

### 部署后：
1. 访问者首次打开网站
2. IndexedDB 为空
3. 自动加载 `default-data.json`
4. 将数据写入访问者的 IndexedDB
5. 后续访问直接读取 IndexedDB（速度快）

### 更新数据：
- 访问者的 IndexedDB 不会自动更新
- 他们需要清除浏览器数据才能看到新内容
- 或者使用隐私/无痕模式查看

---

## 🎯 最佳实践

### ✅ 推荐做法：

1. **定期备份**：每次导出后保存 JSON 文件到安全的地方
2. **命名规范**：导出文件自动包含时间戳，便于版本管理
3. **测试环境**：更新前先在本地测试
4. **版本控制**：每次更新 `default-data.json` 后都要 commit

### ⚠️ 注意事项：

1. **文件大小**：如果上传了大量图片/视频，JSON 文件可能很大
2. **图片路径**：确保图片 URL 是可访问的（使用在线图片或 base64）
3. **敏感信息**：不要在数据中包含密码等敏感信息
4. **浏览器缓存**：访问者可能需要清除缓存才能看到更新

---

## 🆘 常见问题

### Q: 为什么我更新了 default-data.json，访问者还是看到旧内容？

**A:** 访问者的浏览器已经加载过旧数据到 IndexedDB。他们需要：
- 清除浏览器数据
- 使用隐私/无痕模式
- 或等待您实现"强制更新"功能

### Q: 我可以删除 default-data.json 吗？

**A:** 可以，但新访问者会看到空白页面。建议始终保留这个文件。

### Q: 如何查看当前使用的数据？

**A:** 
1. 按 F12 打开开发者工具
2. Application → Storage → IndexedDB
3. 展开 PortfolioDatabase

### Q: 导出的文件太大怎么办？

**A:** 
- 压缩图片（使用在线工具）
- 使用图床（如 Imgur、图床服务）
- 视频使用外链（YouTube、Bilibili）

---

## 🔮 未来改进（可选）

如果您需要更专业的解决方案，可以考虑：

1. **使用云数据库**（Firebase、Supabase）
   - 所有数据存储在云端
   - 实时同步
   - 多设备编辑

2. **添加版本检测**
   - 检测数据版本
   - 自动提示用户刷新

3. **CMS 系统**
   - 在线编辑
   - 无需导出导入

---

## 📞 需要帮助？

如果遇到任何问题，请检查：
- 浏览器控制台（F12）是否有错误
- JSON 文件格式是否正确
- Git 推送是否成功
- Vercel 部署是否完成

祝您使用愉快！🎉

